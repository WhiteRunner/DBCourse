(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-325a5504"],{"03dc":function(t,e,a){"use strict";a("1442")},1442:function(t,e,a){},"73d2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"center"},[a("el-page-header",{attrs:{content:"个人信息"},on:{back:t.goBack}}),a("div",{staticClass:"header"},[a("div",{staticClass:"avatar header-item"},[a("img",{attrs:{src:t.user.avatar,alt:""}})]),a("div",{staticClass:"username header-item"},[t._v(" "+t._s(t.user.username)+" ")]),a("div",{staticClass:"money header-item"},[t._v("余额：￥"+t._s(t.user.money))])]),a("div",{staticClass:"index",staticStyle:{"padding-left":"30px"}},[a("form",[a("input",{attrs:{type:"file",name:"file"},on:{change:function(e){return t.getFile(e)}}}),a("button",{staticClass:"button button-primary button-pill button-small",on:{click:function(e){return t.submit(e)}}},[t._v(" 修改头像 ")])])]),a("div",{staticClass:"index"},[a("el-form",{attrs:{inline:!0,model:t.user,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"手机"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.user.tel,callback:function(e){t.$set(t.user,"tel",e)},expression:"user.tel"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-input",{attrs:{placeholder:"请输入性别"},model:{value:t.user.sex,callback:function(e){t.$set(t.user,"sex",e)},expression:"user.sex"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:t.user.location,callback:function(e){t.$set(t.user,"location",e)},expression:"user.location"}})],1)],1),a("div",{staticClass:"option"},[a("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:t.update}},[t._v("确认修改")])],1)],1),a("div",{staticClass:"index"},[a("el-form",{attrs:{inline:!0,model:t.user,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"旧密码"}},[a("el-input",{attrs:{type:"password","show-password":"",placeholder:"请输入旧密码"},model:{value:t.updatePwd.oldPwd,callback:function(e){t.$set(t.updatePwd,"oldPwd",e)},expression:"updatePwd.oldPwd"}})],1),a("el-form-item",{attrs:{label:"新密码"}},[a("el-input",{attrs:{type:"password","show-password":"",placeholder:"请输入新密码"},model:{value:t.updatePwd.newPwd,callback:function(e){t.$set(t.updatePwd,"newPwd",e)},expression:"updatePwd.newPwd"}})],1),a("el-form-item",{attrs:{label:"确认密码"}},[a("el-input",{attrs:{type:"password","show-password":"",placeholder:"请再次输入密码"},model:{value:t.confirmPwd,callback:function(e){t.confirmPwd=e},expression:"confirmPwd"}})],1),a("div",{staticClass:"option"},[a("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:t.updatePwdBtn}},[t._v("修改密码")])],1)],1)],1)],1)},i=[],n={data:function(){return{user:{avatar:"",uid:null,username:"",sex:"",money:0,location:"",tel:""},updatePwd:{uid:null,oldPwd:"",newPwd:""},confirmPwd:""}},methods:{goBack:function(){this.$router.push("/allGoods")},getFile:function(t){this.file=t.target.files[0]},submit:function(t){var e=this;t.preventDefault();var a=new FormData;a.append("file",this.file),a.append("username",this.user.username),this.$axios.post("/user/upload",a).then((function(t){e.user.avatar=t.data.data})).catch((function(t){}))},update:function(){var t=this;this.$axios.post("/user/updateUserInfo",this.user).then((function(e){t.$message({message:"修改成功",type:"success"})}))},updatePwdBtn:function(){var t=this;this.updatePwd.uid=this.user.uid,this.$axios.post("/user/updateUserPassword",this.updatePwd).then((function(e){201==e.data.state?t.$message.error("修改密码失败，原密码不正确"):(t.updatePwd.oldPwd="",t.updatePwd.newPwd="",t.confirmPwd="",t.$message({message:"修改成功",type:"success"}))}))}},created:function(){var t=this,e=localStorage.getItem("userId");this.$axios.get("/user/findUserInfo/"+e).then((function(e){t.user.avatar=e.data.data.avatar,t.user.uid=e.data.data.uid,t.user.username=e.data.data.username,t.user.sex=e.data.data.sex,t.user.location=e.data.data.location,t.user.tel=e.data.data.tel,t.user.money=e.data.data.money}))}},r=n,l=(a("03dc"),a("2877")),d=Object(l["a"])(r,s,i,!1,null,"427bb570",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-325a5504.c9baa8f3.js.map