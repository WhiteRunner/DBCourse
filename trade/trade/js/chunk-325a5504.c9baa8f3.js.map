{"version":3,"sources":["webpack:///./src/views/Center.vue?5fbd","webpack:///./src/views/Center.vue?b837","webpack:///src/views/Center.vue","webpack:///./src/views/Center.vue?89f3","webpack:///./src/views/Center.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","goBack","user","avatar","_v","_s","username","money","staticStyle","$event","getFile","submit","model","value","callback","$$v","$set","expression","update","updatePwd","confirmPwd","updatePwdBtn","staticRenderFns","data","uid","sex","location","tel","oldPwd","newPwd","methods","$router","push","file","event","target","files","preventDefault","formData","append","$axios","post","then","message","type","created","get","component"],"mappings":"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","file":"js/chunk-325a5504.c9baa8f3.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Center.vue?vue&type=style&index=0&id=427bb570&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"center\"},[_c('el-page-header',{attrs:{\"content\":\"个人信息\"},on:{\"back\":_vm.goBack}}),_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"avatar header-item\"},[_c('img',{attrs:{\"src\":_vm.user.avatar,\"alt\":\"\"}})]),_c('div',{staticClass:\"username header-item\"},[_vm._v(\" \"+_vm._s(_vm.user.username)+\" \")]),_c('div',{staticClass:\"money header-item\"},[_vm._v(\"余额：￥\"+_vm._s(_vm.user.money))])]),_c('div',{staticClass:\"index\",staticStyle:{\"padding-left\":\"30px\"}},[_c('form',[_c('input',{attrs:{\"type\":\"file\",\"name\":\"file\"},on:{\"change\":function($event){return _vm.getFile($event)}}}),_c('button',{staticClass:\"button button-primary button-pill button-small\",on:{\"click\":function($event){return _vm.submit($event)}}},[_vm._v(\" 修改头像 \")])])]),_c('div',{staticClass:\"index\"},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.user,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"手机\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入手机号码\"},model:{value:(_vm.user.tel),callback:function ($$v) {_vm.$set(_vm.user, \"tel\", $$v)},expression:\"user.tel\"}})],1),_c('el-form-item',{attrs:{\"label\":\"性别\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入性别\"},model:{value:(_vm.user.sex),callback:function ($$v) {_vm.$set(_vm.user, \"sex\", $$v)},expression:\"user.sex\"}})],1),_c('el-form-item',{attrs:{\"label\":\"地址\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入地址\"},model:{value:(_vm.user.location),callback:function ($$v) {_vm.$set(_vm.user, \"location\", $$v)},expression:\"user.location\"}})],1)],1),_c('div',{staticClass:\"option\"},[_c('el-button',{staticStyle:{\"width\":\"120px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.update}},[_vm._v(\"确认修改\")])],1)],1),_c('div',{staticClass:\"index\"},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.user,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"旧密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"show-password\":\"\",\"placeholder\":\"请输入旧密码\"},model:{value:(_vm.updatePwd.oldPwd),callback:function ($$v) {_vm.$set(_vm.updatePwd, \"oldPwd\", $$v)},expression:\"updatePwd.oldPwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"show-password\":\"\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.updatePwd.newPwd),callback:function ($$v) {_vm.$set(_vm.updatePwd, \"newPwd\", $$v)},expression:\"updatePwd.newPwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"show-password\":\"\",\"placeholder\":\"请再次输入密码\"},model:{value:(_vm.confirmPwd),callback:function ($$v) {_vm.confirmPwd=$$v},expression:\"confirmPwd\"}})],1),_c('div',{staticClass:\"option\"},[_c('el-button',{staticStyle:{\"width\":\"120px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updatePwdBtn}},[_vm._v(\"修改密码\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"center\">\n    <el-page-header @back=\"goBack\" content=\"个人信息\"> </el-page-header>\n    <!-- header -->\n    <div class=\"header\">\n      <div class=\"avatar header-item\">\n        <img :src=\"user.avatar\" alt=\"\" />\n      </div>\n      <div class=\"username header-item\">\n        {{ user.username }}\n      </div>\n      <div class=\"money header-item\">余额：￥{{ user.money }}</div>\n    </div>\n    <!-- 修改头像 -->\n    <div class=\"index\" style=\"padding-left: 30px\">\n      <form>\n        <input type=\"file\" name=\"file\" @change=\"getFile($event)\" />\n        <button\n          class=\"button button-primary button-pill button-small\"\n          @click=\"submit($event)\"\n        >\n          修改头像\n        </button>\n      </form>\n    </div>\n    <!-- index form -->\n    <div class=\"index\">\n      <el-form :inline=\"true\" :model=\"user\" label-width=\"80px\">\n        <el-form-item label=\"手机\">\n          <el-input placeholder=\"请输入手机号码\" v-model=\"user.tel\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-input placeholder=\"请输入性别\" v-model=\"user.sex\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"地址\">\n          <el-input placeholder=\"请输入地址\" v-model=\"user.location\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"option\">\n        <el-button type=\"primary\" style=\"width: 120px\" @click=\"update\"\n          >确认修改</el-button\n        >\n      </div>\n    </div>\n    <!-- 修改密码模块 -->\n    <div class=\"index\">\n      <el-form :inline=\"true\" :model=\"user\" label-width=\"80px\">\n        <el-form-item label=\"旧密码\">\n          <el-input\n            type=\"password\"\n            show-password\n            placeholder=\"请输入旧密码\"\n            v-model=\"updatePwd.oldPwd\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\">\n          <el-input\n            type=\"password\"\n            show-password\n            placeholder=\"请输入新密码\"\n            v-model=\"updatePwd.newPwd\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认密码\">\n          <el-input\n            type=\"password\"\n            show-password\n            placeholder=\"请再次输入密码\"\n            v-model=\"confirmPwd\"\n          ></el-input>\n        </el-form-item>\n        <div class=\"option\">\n          <el-button type=\"primary\" style=\"width: 120px\" @click=\"updatePwdBtn\"\n            >修改密码</el-button\n          >\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      user: {\n        avatar: \"\",\n        uid: null,\n        username: \"\",\n        sex: \"\",\n        money: 0,\n        location: \"\",\n        tel: \"\",\n      },\n      updatePwd: {\n        uid: null,\n        oldPwd: \"\",\n        newPwd: \"\",\n      },\n      confirmPwd: \"\",\n    };\n  },\n  methods: {\n    goBack() {\n      this.$router.push(\"/allGoods\");\n    },\n    getFile: function (event) {\n      this.file = event.target.files[0];\n      console.log(\"getFile\", this.file);\n    },\n    submit: function (event) {\n      let that = this;\n      //阻止元素发生默认的行为\n      event.preventDefault();\n      let formData = new FormData();\n      formData.append(\"file\", this.file);\n      formData.append(\"username\",this.user.username)\n      this.$axios\n        .post(\"/user/upload\", formData)\n        .then(function (response) {\n          //--------------⭐主要-----------------------\n          console.log(\"success\", response.data.data);\n\n          that.user.avatar = response.data.data;\n          console.log(\"获取到了图片链接\", that.user.avatar);\n        })\n        .catch(function (error) {\n          console.log(\"error\", error);\n        });\n    },\n    update() {\n      console.log(\"获取到了user信息\", this.user);\n      this.$axios.post(\"/user/updateUserInfo\", this.user).then((res) => {\n        console.log(\"更新成功了吗？\", res);\n        this.$message({\n          message: \"修改成功\",\n          type: \"success\",\n        });\n      });\n    },\n    updatePwdBtn() {\n      this.updatePwd.uid = this.user.uid;\n      console.log(this.updatePwd);\n      this.$axios\n        .post(\"/user/updateUserPassword\", this.updatePwd)\n        .then((res) => {\n          console.log(res);\n          if (res.data.state == 201) {\n            this.$message.error(\"修改密码失败，原密码不正确\");\n          } else {\n            (this.updatePwd.oldPwd = \"\"),\n              (this.updatePwd.newPwd = \"\"),\n              (this.confirmPwd = \"\");\n            this.$message({\n              message: \"修改成功\",\n              type: \"success\",\n            });\n          }\n        });\n    },\n  },\n  created() {\n    let uid = localStorage.getItem(\"userId\");\n    this.$axios.get(\"/user/findUserInfo/\" + uid).then((res) => {\n      this.user.avatar = res.data.data.avatar;\n      this.user.uid = res.data.data.uid;\n      this.user.username = res.data.data.username;\n      this.user.sex = res.data.data.sex;\n      this.user.location = res.data.data.location;\n      this.user.tel = res.data.data.tel;\n      this.user.money = res.data.data.money;\n      console.log(\"this.user\", this.user);\n    });\n  },\n};\n</script>\n<style scoped>\n.center {\n  margin: 0 auto;\n  padding: 12px 12px;\n  width: 1200px;\n  height: 100vh;\n  background-color: #fff;\n}\n.header {\n  width: 92%;\n  display: flex;\n  margin: 20px auto;\n}\n.header-item {\n  margin: 0 2%;\n  display: flex;\n  align-items: center;\n}\n.header .avatar {\n  background-color: rgb(187, 187, 187);\n  width: 80px;\n  height: 80px;\n  border-radius: 40px;\n  overflow: hidden;\n}\n.header .avatar img {\n  width: 100%;\n}\n.header .username {\n  font-weight: 600;\n  font-size: 28px;\n  letter-spacing: 2px;\n}\n.header .money {\n  color: #27ae60;\n}\n.index {\n  width: 92%;\n  margin: 50px auto;\n}\n.index .option {\n  display: flex;\n  justify-content: center;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Center.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Center.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Center.vue?vue&type=template&id=427bb570&scoped=true&\"\nimport script from \"./Center.vue?vue&type=script&lang=js&\"\nexport * from \"./Center.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Center.vue?vue&type=style&index=0&id=427bb570&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"427bb570\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}